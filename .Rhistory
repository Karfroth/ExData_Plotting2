plot(x=emissions$Group.1, y=emissions$x, main="Total PM2.5 emissions in the United States from 1999 to 2008", xlab="Years", ylab="Emission")
plot(x=emissions$Group.1, y=emissions$x,  xlab="Years", ylab="Emission", type="l"
main="Total PM2.5 emissions in the United States from 1999 to 2008")
plot(x=emissions$Group.1, y=emissions$x,  xlab="Years", ylab="Emission", type="l",
main="Total PM2.5 emissions in the United States from 1999 to 2008")
library(ggplot2)
qplot(x=emissions$Group.1, y=emissions$x,  xlab="Years", ylab="Emission")
ggplot(data=emissions, aes(x=Group.1, y=x))+geom_line()
ggplot(data=emissions, aes(x=Group.1, y=x))+geom_line()+labs(title="Total emissions from PM2.5 decreased in the United States from 1999 to 2008", xlab="Years", ylab="Total emissions of PM2.5")
ggplot(data=emissions, aes(x=Group.1, y=x))+geom_line()+labs(title="Total emissions from PM2.5 decreased in the United States from 1999 to 2008", xlab="Years", ylab="Total emissions of PM2.5")
ggplot(data=emissions, aes(x=Group.1, y=x))+geom_line()+labs(title="Total emissions from PM2.5 decreased in the United States from 1999 to 2008") + xlab("Years")+ ylab("Total emissions of PM2.5")
if(!"data" %in% list.files()){
dir.create("data")
fileurl<-"https://d396qusza40orc.cloudfront.net/exdata%2Fdata%2FNEI_data.zip"
download.file(fileurl, destfile = "data/exdata_data_NEI_data.zip")
unzip("data/exdata_data_NEI_data.zip", exdir = "data")
}
if(!"pngs" %in% list.files()){
dir.create("pngs")
}
if (!"NEI" %in% ls()){
NEI<-readRDS("data/summarySCC_PM25.rds")
}
if(!"SCC" %in% ls()){
SCC <- readRDS("data/Source_Classification_Code.rds")
}
png("pngs/plot1.png")
emissions<-with(data = NEI, aggregate(x=Emissions, by = list(year), FUN=sum))
ggplot(data=emissions, aes(x=Group.1, y=x))+geom_line()+
labs(title="Total emissions from PM2.5 decreased in the United States from 1999 to 2008")
+ xlab("Years")+ ylab("Total emissions of PM2.5")
dev.off()
png("pngs/plot1.png")
emissions<-with(data = NEI, aggregate(x=Emissions, by = list(year), FUN=sum))
ggplot(data=emissions, aes(x=Group.1, y=x))+geom_line()+
labs(title="Total emissions from PM2.5 decreased in the United States from 1999 to 2008") +
xlab("Years")+ ylab("Total emissions of PM2.5")
dev.off()
png("pngs/plot1.png", width = 720, height = 720, units = px)
ggplot(data=emissions, aes(x=Group.1, y=x))+geom_line()+
labs(title="Total emissions from PM2.5 decreased in the United States from 1999 to 2008") +
xlab("Years")+ ylab("Total emissions of PM2.5")
dev.off()
png("pngs/plot1.png", width = "720", height = "720", units = px)
ggplot(data=emissions, aes(x=Group.1, y=x))+geom_line()+
labs(title="Total emissions from PM2.5 decreased in the United States from 1999 to 2008") +
xlab("Years")+ ylab("Total emissions of PM2.5")
dev.off()
png("pngs/plot1.png", width = "720", height = "720", units = "px")
ggplot(data=emissions, aes(x=Group.1, y=x))+geom_line()+
labs(title="Total emissions from PM2.5 decreased in the United States from 1999 to 2008") +
xlab("Years")+ ylab("Total emissions of PM2.5")
dev.off()
png("pngs/plot1.png", width = 720, height = 720, units = "px")
ggplot(data=emissions, aes(x=Group.1, y=x))+geom_line()+
labs(title="Total emissions from PM2.5 decreased in the United States from 1999 to 2008") +
xlab("Years")+ ylab("Total emissions of PM2.5")
dev.off()
png("pngs/plot1.png", width = 480, height = 480, units = "px")
ggplot(data=emissions, aes(x=Group.1, y=x))+geom_line()+
labs(title="Total emissions from PM2.5 decreased in the United States from 1999 to 2008") +
xlab("Years")+ ylab("Total emissions of PM2.5")
dev.off()
png("pngs/plot1.png")
ggplot(data=emissions, aes(x=Group.1, y=x))+geom_line()+
labs(title="Total emissions from PM2.5 decreased in the United States from 1999 to 2008") +
xlab("Years")+ ylab("Total emissions of PM2.5")
dev.off()
png("pngs/plot1.png")
ggplot(data=emissions, aes(x=Group.1, y=x))+geom_line()+
labs(title="Total emissions from PM2.5 decreased in the United States from 1999 to 2008") +
xlab("Years")+ ylab("Total emissions of PM2.5")
dev.off()
png("pngs/plot1.png", width = 720, height = 720, units = "px")
ggplot(data=emissions, aes(x=Group.1, y=x))+geom_line()+
labs(title="Total emissions from PM2.5 decreased in the United States from 1999 to 2008") +
xlab("Years")+ ylab("Total emissions of PM2.5")
dev.off()
png("pngs/plot1.png", width = 720, height = 720, units = "px")
ggplot(data=emissions, aes(x=Group.1, y=x))+geom_line()+
ggtitle("Total emissions from PM2.5 decreased in the United States from 1999 to 2008") +
xlab("Years")+ ylab("Total emissions of PM2.5")
dev.off()
png("pngs/plot1.png", width = 720, height = 720, units = "px")
ggplot(data=emissions, aes(x=Group.1, y=x))+geom_line()+
ggtitle("Total emissions from PM2.5 decreased in the United States from 1999 to 2008") +
xlab("Years")+ ylab("Total emissions of PM2.5") +
theme(plot.title = element_text(lineheight=.8, face="bold"))
dev.off()
png("pngs/plot1.png", width = 720, height = 720, units = "px")
ggplot(data=emissions, aes(x=Group.1, y=x))+geom_line()+
ggtitle("Total emissions from PM2.5 decreased in the United States from 1999 to 2008") +
xlab("Years")+ ylab("Total emissions of PM2.5") +
theme(plot.title = element_text(lineheight=1.5, face="bold"))
dev.off()
data<-NEI[NEI$fips=="24510"]
data<-NEI[NEI$fips=="24510",]
split(x = NEI, f = fips)->a
split(x = NEI, f = NEI$fips)->a
a["24510"]
a["24510"]==data
a[["24510"]]==data
a[["24510"]]&data
split(x = NEI, f = NEI$fips)[["24510"]]&a[[24510]]
split(x = NEI, f = NEI$fips)[["24510"]]&a[["24510"]]
split(x = NEI, f = NEI$fips)[["24510"]]
head(split(x = NEI, f = NEI$fips)[["24510"]])
png("pngs/plot1.png", width = 720, height = 720, units = "px")
plot(x=emissions$Group.1, y=emissions$x,
main="Total emissions from PM2.5 decreased in the United States from 1999 to 2008",
xlab="Years", ylab="Emissions")
dev.off()
png("pngs/plot1.png", width = 720, height = 720, units = "px")
plot(x=emissions$Group.1, y=emissions$x,
main="Total emissions from PM2.5 decreased in the United States from 1999 to 2008",
xlab="Years", ylab="Emissions", type="l")
dev.off()
data<-split(x = NEI, f = NEI$fips)[["24510"]]
emissions.balti<-with(data = data, aggregate(x=Emissions, by = list(year), FUN=sum))
png("pngs/plot2.png", width = 720, height = 720, units = "px")
plot(x=emissions.balti$Group.1, y=emissions.balti$x,
main="Total emissions from PM2.5 decreased in the Baltimore City, Maryland from 1999 to 2008",
xlab="Years", ylab="Emissions", type="l")
dev.off()
colnames(NEI)
View(emissions.balti)
emissions.balti.type<-with(data = data, aggregate(x=Emissions,
by = c(list(year),list(type)), FUN=sum))
View(emissions.balti.type)
emissions.balti.type<-with(data = data, aggregate(x=Emissions,
by = c(list(year),list(type)), FUN=sum))
ggplot(data=emissions.balti.type, aes(x=Group.1, y=x))+geom_line()+
ggtitle("Total emissions from PM2.5 decreased in the United States from 1999 to 2008, by types") +
xlab("Years")+ ylab("Total emissions of PM2.5") +
theme(plot.title = element_text(lineheight=1.5, face="bold")) +
facet_grid(Group.2)
ggplot(data=emissions.balti.type, aes(x=Group.1, y=x))+geom_line()+
ggtitle("Total emissions from PM2.5 decreased in the United States from 1999 to 2008, by types") +
xlab("Years")+ ylab("Total emissions of PM2.5") +
theme(plot.title = element_text(lineheight=1.5, face="bold")) +
facet_grid(emissions.balti.type$Group.2)
View(emissions.balti.type)
emissions.balti.type2<-emissions.balti.type
tolower(emissions.balti.type2[,2])
gsub("-", ".", emissions.balti.type2[,2])
emissions.balti.type2[,2]<-tolower(gsub("-", ".", emissions.balti.type2[,2]))
View(emissions.balti.type2)
data<-split(x = NEI, f = NEI$fips)[["24510"]]
emissions.balti.type<-with(data = data, aggregate(x=Emissions,
by = c(list(year),list(type)), FUN=sum))
emissions.balti.type[,2]<-tolower(gsub("-", ".", emissions.balti.type[,2]))
ggplot(data=emissions.balti.type, aes(x=Group.1, y=x))+geom_line()+
ggtitle("Total emissions from PM2.5 decreased in the United States from 1999 to 2008, by types") +
xlab("Years")+ ylab("Total emissions of PM2.5") +
theme(plot.title = element_text(lineheight=1.5, face="bold")) +
facet_grid(emissions.balti.type$Group.2)
View(emissions.balti.type2)
ggplot(data=emissions.balti.type, aes(x=Group.1, y=x, color=Group.2))+geom_line()+
ggtitle("Total emissions from PM2.5 decreased in the United States from 1999 to 2008, by types") +
xlab("Years")+ ylab("Total emissions of PM2.5") +
theme(plot.title = element_text(lineheight=1.5, face="bold"))
View(emissions.balti.type2)
data<-split(x = NEI, f = NEI$fips)[["24510"]]
emissions.balti.type<-with(data = data, aggregate(x=Emissions,
by = c(list(year),list(type)), FUN=sum))
colnames(emissions.balti.type)<-c("years", "Type", "Emissions")
#emissions.balti.type[,2]<-tolower(gsub("-", ".", emissions.balti.type[,2]))
ggplot(data=emissions.balti.type, aes(x=years, y=Emissions, color=Type))+geom_line()+
ggtitle("Total emissions from PM2.5 decreased in the United States from 1999 to 2008, by types") +
xlab("Years")+ ylab("Total emissions of PM2.5") +
theme(plot.title = element_text(lineheight=1.5, face="bold"))
if(!"data" %in% list.files()){
dir.create("data")
fileurl<-"https://d396qusza40orc.cloudfront.net/exdata%2Fdata%2FNEI_data.zip"
download.file(fileurl, destfile = "data/exdata_data_NEI_data.zip")
unzip("data/exdata_data_NEI_data.zip", exdir = "data")
}
if(!"pngs" %in% list.files()){
dir.create("pngs")
}
if (!"NEI" %in% ls()){
NEI<-readRDS("data/summarySCC_PM25.rds")
}
if(!"SCC" %in% ls()){
SCC <- readRDS("data/Source_Classification_Code.rds")
}
data<-split(x = NEI, f = NEI$fips)[["24510"]]
emissions.balti.type<-with(data = data, aggregate(x=Emissions,
by = c(list(year),list(type)), FUN=sum))
colnames(emissions.balti.type)<-c("years", "Type", "Emissions")
#emissions.balti.type[,2]<-tolower(gsub("-", ".", emissions.balti.type[,2]))
png("pngs/plot3.png", width = 720, height = 720, units = "px")
ggplot(data=emissions.balti.type, aes(x=years, y=Emissions, color=Type))+geom_line()+
ggtitle("Total emissions from PM2.5 decreased in the United States from 1999 to 2008, by types") +
xlab("Years")+ ylab("Total emissions of PM2.5") +
theme(plot.title = element_text(lineheight=1.5, face="bold"))
dev.off()
if(!"data" %in% list.files()){
dir.create("data")
fileurl<-"https://d396qusza40orc.cloudfront.net/exdata%2Fdata%2FNEI_data.zip"
download.file(fileurl, destfile = "data/exdata_data_NEI_data.zip")
unzip("data/exdata_data_NEI_data.zip", exdir = "data")
}
if(!"pngs" %in% list.files()){
dir.create("pngs")
}
if (!"NEI" %in% ls()){
NEI<-readRDS("data/summarySCC_PM25.rds")
}
if(!"SCC" %in% ls()){
SCC <- readRDS("data/Source_Classification_Code.rds")
}
View(NEI)
View(SCC)
View(NEI)
View(SCC)
coal.source<-SCC[grep("coal", SCC$Short.Name, ignore.case = T),]
View(coal.source)
NEI$SCC==coal.source$SCC
which(x = NEI$SCC, coal.source$SCC)
NEI$SCC
coal.source$SCC
data<-NEI[NEI$SCC %in% coal.source$SCC]
data<-NEI[NEI$SCC %in% coal.source$SCC,]
coal.source<-SCC[grep("coal", SCC$Short.Name, ignore.case = T),]
data<-NEI[NEI$SCC %in% coal.source$SCC,]
emission.coal<-aggregate(data$Emissions, by = list(data$year), FUN=sum)
ggplot(data=emissions.coal, aes(x=Group.1, y=x))+geom_line()+
ggtitle("Total emissions by coal combustion-related sources in the United States from 1999 to 2008") +
xlab("Years")+ ylab("Total emissions of PM2.5") +
theme(plot.title = element_text(lineheight=1.5, face="bold"))
ggplot(data=emission.coal, aes(x=Group.1, y=x))+geom_line()+
ggtitle("Total emissions by coal combustion-related sources in the United States from 1999 to 2008") +
xlab("Years")+ ylab("Total emissions of PM2.5") +
theme(plot.title = element_text(lineheight=1.5, face="bold"))
coal.source<-SCC[grep("coal", SCC$Short.Name, ignore.case = T),]
data<-NEI[NEI$SCC %in% coal.source$SCC,]
emission.coal<-aggregate(data$Emissions, by = list(data$year), FUN=sum)
png("pngs/plot4.png", width = 720, height = 720, units = "px")
ggplot(data=emission.coal, aes(x=Group.1, y=x))+geom_line()+
ggtitle("Total emissions by coal combustion-related sources in the United States from 1999 to 2008") +
xlab("Years")+ ylab("Total emissions of PM2.5") +
theme(plot.title = element_text(lineheight=1.5, face="bold"))
dev.off()
View(NEI)
View(SCC)
motor<-SCC[grep("motor", SCC$Short.Name, ignore.case = T),]
data<-NEI[NEI$SCC %in% coal.source$SCC,]
emission.motor<-aggregate(data$Emissions, by = list(data$year), FUN=sum)
View(emission.motor)
View(motor)
View(data)
motor<-SCC[grep("motor", SCC$Short.Name, ignore.case = T),]
data<-NEI[NEI$SCC %in% coal.source$SCC,]
data<-split(x = NEI, f = NEI$fips)[["24510"]]
data.balti<-with(data = data, aggregate(x=Emissions, by = list(year), FUN=sum))
motor.source<-SCC[grep("motor", SCC$Short.Name, ignore.case = T),]
data<-NEI[NEI$SCC %in% motor.source$SCC,]
data<-split(x = NEI, f = NEI$fips)[["24510"]]
data.balti<-with(data = data, aggregate(x=Emissions, by = list(year), FUN=sum))
View(data.balti)
png("pngs/plot5.png", width = 720, height = 720, units = "px")
ggplot(data=emission.motor, aes(x=Group.1, y=x))+geom_line()+
ggtitle("Total emissions from Motor vehicle sources in the Baltimore City from 1999 to 2008") +
xlab("Years")+ ylab("Total emissions of PM2.5") +
theme(plot.title = element_text(lineheight=1.5, face="bold"))
dev.off()
View(emission.coal)
View(emission.motor)
motor.source<-SCC[grep("motor", SCC$Short.Name, ignore.case = T),]
data<-NEI[NEI$SCC %in% motor.source$SCC,]
data<-split(x = data, f = NEI$fips)[["24510"]]
data.balti<-with(data = data, aggregate(x=Emissions, by = list(year), FUN=sum))
png("pngs/plot5.png", width = 720, height = 720, units = "px")
ggplot(data=emission.motor, aes(x=Group.1, y=x))+geom_line()+
ggtitle("Total emissions from Motor vehicle sources in the Baltimore City from 1999 to 2008") +
xlab("Years")+ ylab("Total emissions of PM2.5") +
theme(plot.title = element_text(lineheight=1.5, face="bold"))
dev.off()
motor.source<-SCC[grep("motor", SCC$Short.Name, ignore.case = T),]
data<-NEI[NEI$SCC %in% motor.source$SCC,]
View(data)
data<-split(x = data, f = NEI$fips)[["24510"]]
motor.source<-SCC[grep("motor", SCC$Short.Name, ignore.case = T),]
data<-NEI[NEI$SCC %in% motor.source$SCC,]
data<-split(x = data, f = data$fips)[["24510"]]
data.balti<-with(data = data, aggregate(x=Emissions, by = list(year), FUN=sum))
png("pngs/plot5.png", width = 720, height = 720, units = "px")
ggplot(data=emission.motor, aes(x=Group.1, y=x))+geom_line()+
ggtitle("Total emissions from Motor vehicle sources in the Baltimore City from 1999 to 2008") +
xlab("Years")+ ylab("Total emissions of PM2.5") +
theme(plot.title = element_text(lineheight=1.5, face="bold"))
dev.off()
if(!"data" %in% list.files()){
dir.create("data")
fileurl<-"https://d396qusza40orc.cloudfront.net/exdata%2Fdata%2FNEI_data.zip"
download.file(fileurl, destfile = "data/exdata_data_NEI_data.zip")
unzip("data/exdata_data_NEI_data.zip", exdir = "data")
}
if(!"pngs" %in% list.files()){
dir.create("pngs")
}
if (!"NEI" %in% ls()){
NEI<-readRDS("data/summarySCC_PM25.rds")
}
if(!"SCC" %in% ls()){
SCC <- readRDS("data/Source_Classification_Code.rds")
}
motor.source<-SCC[grep("motor", SCC$Short.Name, ignore.case = T),]
data<-NEI[NEI$SCC %in% motor.source$SCC,]
data<-split(x = data, f = data$fips)[["24510"]]
data.balti<-with(data = data, aggregate(x=Emissions, by = list(year), FUN=sum))
png("pngs/plot5.png", width = 720, height = 720, units = "px")
ggplot(data=emission.motor, aes(x=Group.1, y=x))+geom_line()+
ggtitle("Total emissions from Motor vehicle sources in the Baltimore City from 1999 to 2008") +
xlab("Years")+ ylab("Total emissions of PM2.5") +
theme(plot.title = element_text(lineheight=1.5, face="bold"))
dev.off()
png("pngs/plot5.png", width = 720, height = 720, units = "px")
ggplot(data=data.balti, aes(x=Group.1, y=x))+geom_line()+
ggtitle("Total emissions from Motor vehicle sources in the Baltimore City from 1999 to 2008") +
xlab("Years")+ ylab("Total emissions of PM2.5") +
theme(plot.title = element_text(lineheight=1.5, face="bold"))
dev.off()
View(data.balti)
rep("Baltimore")
rep("Baltimore", 5)
data.balti$city<-rep("Baltimore City", length(data.balti))
View(data.balti)
motor.source<-SCC[grep("motor", SCC$Short.Name, ignore.case = T),]
data<-NEI[NEI$SCC %in% motor.source$SCC,]
data.balti<-split(x = data, f = data$fips)[["24510"]]
data.balti<-with(data = data.balti, aggregate(x=Emissions, by = list(year), FUN=sum))
data.balti$city<-rep("Baltimore City", length(data.balti))
data.la<-split(x = data, f = data$fips)[["06037"]]
data.la<-with(data = data.la, aggregate(x=Emissions, by = list(year), FUN=sum))
data.la$city<-rep("Los Angeles County", length(data.balti))
datas<-rbind(data.balti, data.la)
View(data.la)
View(motor.source)
View(data.balti)
motor.source<-SCC[grep("motor", SCC$Short.Name, ignore.case = T),]
data<-NEI[NEI$SCC %in% motor.source$SCC,]
data.balti<-split(x = data, f = data$fips)[["24510"]]
data.balti<-with(data = data.balti, aggregate(x=Emissions, by = list(year), FUN=sum))
data.balti$city<-rep("Baltimore City", length(data.balti))
data.la<-split(x = data, f = data$fips)[["06037"]]
data.la<-with(data = data.la, aggregate(x=Emissions, by = list(year), FUN=sum))
data.la$city<-rep("Los Angeles County", length(data.la))
datas<-rbind(data.balti, data.la)
png("pngs/plot6.png", width = 720, height = 720, units = "px")
ggplot(data=datas, aes(x=Group.1, y=x, color=city))+geom_line()+
ggtitle("Total emissions from Motor vehicle sources in the Baltimore City from 1999 to 2008") +
xlab("Years")+ ylab("Total emissions of PM2.5") +
theme(plot.title = element_text(lineheight=1.5, face="bold"))
dev.off()
png("pngs/plot6.png", width = 720, height = 720, units = "px")
ggplot(data=datas, aes(x=Group.1, y=x, color=city))+geom_line()+
ggtitle("Comparison of Total emissions from Motor vehicle sources
between the Baltimore City and Los Angeles County from 1999 to 2008") +
xlab("Years")+ ylab("Total emissions of PM2.5") +
theme(plot.title = element_text(lineheight=1.5, face="bold"))
dev.off()
if(!"data" %in% list.files()){
dir.create("data")
fileurl<-"https://d396qusza40orc.cloudfront.net/exdata%2Fdata%2FNEI_data.zip"
download.file(fileurl, destfile = "data/exdata_data_NEI_data.zip")
unzip("data/exdata_data_NEI_data.zip", exdir = "data")
}
if(!"pngs" %in% list.files()){
dir.create("pngs")
}
if (!"NEI" %in% ls()){
NEI<-readRDS("data/summarySCC_PM25.rds")
}
if(!"SCC" %in% ls()){
SCC <- readRDS("data/Source_Classification_Code.rds")
}
emissions<-with(data = NEI, aggregate(x=Emissions, by = list(year), FUN=sum))
png("pngs/plot1.png", width = 720, height = 720, units = "px")
plot(x=emissions$Group.1, y=emissions$x,
main="Total emissions from PM2.5 decreased in the United States from 1999 to 2008",
xlab="Years", ylab="Emissions", type="l")
dev.off()
if(!"data" %in% list.files()){
dir.create("data")
fileurl<-"https://d396qusza40orc.cloudfront.net/exdata%2Fdata%2FNEI_data.zip"
download.file(fileurl, destfile = "data/exdata_data_NEI_data.zip")
unzip("data/exdata_data_NEI_data.zip", exdir = "data")
}
if(!"pngs" %in% list.files()){
dir.create("pngs")
}
if (!"NEI" %in% ls()){
NEI<-readRDS("data/summarySCC_PM25.rds")
}
if(!"SCC" %in% ls()){
SCC <- readRDS("data/Source_Classification_Code.rds")
}
data<-split(x = NEI, f = NEI$fips)[["24510"]]
emissions.balti<-with(data = data, aggregate(x=Emissions, by = list(year), FUN=sum))
png("pngs/plot2.png", width = 720, height = 720, units = "px")
plot(x=emissions.balti$Group.1, y=emissions.balti$x,
main="Total emissions from PM2.5 decreased in the Baltimore City, Maryland from 1999 to 2008",
xlab="Years", ylab="Emissions", type="l")
dev.off()
if(!"data" %in% list.files()){
dir.create("data")
fileurl<-"https://d396qusza40orc.cloudfront.net/exdata%2Fdata%2FNEI_data.zip"
download.file(fileurl, destfile = "data/exdata_data_NEI_data.zip")
unzip("data/exdata_data_NEI_data.zip", exdir = "data")
}
if(!"pngs" %in% list.files()){
dir.create("pngs")
}
if (!"NEI" %in% ls()){
NEI<-readRDS("data/summarySCC_PM25.rds")
}
if(!"SCC" %in% ls()){
SCC <- readRDS("data/Source_Classification_Code.rds")
}
data<-split(x = NEI, f = NEI$fips)[["24510"]]
emissions.balti.type<-with(data = data, aggregate(x=Emissions,
by = c(list(year),list(type)), FUN=sum))
colnames(emissions.balti.type)<-c("years", "Type", "Emissions")
#emissions.balti.type[,2]<-tolower(gsub("-", ".", emissions.balti.type[,2]))
png("pngs/plot3.png", width = 720, height = 720, units = "px")
ggplot(data=emissions.balti.type, aes(x=years, y=Emissions, color=Type))+geom_line()+
ggtitle("Total emissions from PM2.5 decreased in the United States from 1999 to 2008, by types") +
xlab("Years")+ ylab("Total emissions of PM2.5") +
theme(plot.title = element_text(lineheight=1.5, face="bold"))
dev.off()
if(!"data" %in% list.files()){
dir.create("data")
fileurl<-"https://d396qusza40orc.cloudfront.net/exdata%2Fdata%2FNEI_data.zip"
download.file(fileurl, destfile = "data/exdata_data_NEI_data.zip")
unzip("data/exdata_data_NEI_data.zip", exdir = "data")
}
if(!"pngs" %in% list.files()){
dir.create("pngs")
}
if (!"NEI" %in% ls()){
NEI<-readRDS("data/summarySCC_PM25.rds")
}
if(!"SCC" %in% ls()){
SCC <- readRDS("data/Source_Classification_Code.rds")
}
coal.source<-SCC[grep("coal", SCC$Short.Name, ignore.case = T),]
data<-NEI[NEI$SCC %in% coal.source$SCC,]
emission.coal<-aggregate(data$Emissions, by = list(data$year), FUN=sum)
png("pngs/plot4.png", width = 720, height = 720, units = "px")
ggplot(data=emission.coal, aes(x=Group.1, y=x))+geom_line()+
ggtitle("Total emissions by coal combustion-related sources in the United States from 1999 to 2008") +
xlab("Years")+ ylab("Total emissions of PM2.5") +
theme(plot.title = element_text(lineheight=1.5, face="bold"))
dev.off()
if(!"data" %in% list.files()){
dir.create("data")
fileurl<-"https://d396qusza40orc.cloudfront.net/exdata%2Fdata%2FNEI_data.zip"
download.file(fileurl, destfile = "data/exdata_data_NEI_data.zip")
unzip("data/exdata_data_NEI_data.zip", exdir = "data")
}
if(!"pngs" %in% list.files()){
dir.create("pngs")
}
if (!"NEI" %in% ls()){
NEI<-readRDS("data/summarySCC_PM25.rds")
}
if(!"SCC" %in% ls()){
SCC <- readRDS("data/Source_Classification_Code.rds")
}
motor.source<-SCC[grep("motor", SCC$Short.Name, ignore.case = T),]
data<-NEI[NEI$SCC %in% motor.source$SCC,]
data<-split(x = data, f = data$fips)[["24510"]]
data.balti<-with(data = data, aggregate(x=Emissions, by = list(year), FUN=sum))
png("pngs/plot5.png", width = 720, height = 720, units = "px")
ggplot(data=data.balti, aes(x=Group.1, y=x))+geom_line()+
ggtitle("Total emissions from Motor vehicle sources in the Baltimore City from 1999 to 2008") +
xlab("Years")+ ylab("Total emissions of PM2.5") +
theme(plot.title = element_text(lineheight=1.5, face="bold"))
dev.off()
if(!"data" %in% list.files()){
dir.create("data")
fileurl<-"https://d396qusza40orc.cloudfront.net/exdata%2Fdata%2FNEI_data.zip"
download.file(fileurl, destfile = "data/exdata_data_NEI_data.zip")
unzip("data/exdata_data_NEI_data.zip", exdir = "data")
}
if(!"pngs" %in% list.files()){
dir.create("pngs")
}
if (!"NEI" %in% ls()){
NEI<-readRDS("data/summarySCC_PM25.rds")
}
if(!"SCC" %in% ls()){
SCC <- readRDS("data/Source_Classification_Code.rds")
}
motor.source<-SCC[grep("motor", SCC$Short.Name, ignore.case = T),]
data<-NEI[NEI$SCC %in% motor.source$SCC,]
data.balti<-split(x = data, f = data$fips)[["24510"]]
data.balti<-with(data = data.balti, aggregate(x=Emissions, by = list(year), FUN=sum))
data.balti$city<-rep("Baltimore City", length(data.balti))
data.la<-split(x = data, f = data$fips)[["06037"]]
data.la<-with(data = data.la, aggregate(x=Emissions, by = list(year), FUN=sum))
data.la$city<-rep("Los Angeles County", length(data.la))
datas<-rbind(data.balti, data.la)
png("pngs/plot6.png", width = 720, height = 720, units = "px")
ggplot(data=datas, aes(x=Group.1, y=x, color=city))+geom_line()+
ggtitle("Comparison of Total emissions from Motor vehicle sources
between the Baltimore City and Los Angeles County from 1999 to 2008") +
xlab("Years")+ ylab("Total emissions of PM2.5") +
theme(plot.title = element_text(lineheight=1.5, face="bold"))
dev.off()
